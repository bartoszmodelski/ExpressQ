<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
        "http://struts.apache.org/dtds/struts-2.3.dtd">
<struts>
    <constant name="struts.enable.DynamicMethodInvocation" value="false"/>
    <constant name="struts.devMode" value="true"/>
    <package name="default" namespace="/" extends="struts-default">

	<interceptors>
		<interceptor class="com.delta.expressq.interceptors.LoginInterceptor" name="loginInterceptor">
		</interceptor>
		<interceptor-stack name="loginStack">
			<interceptor-ref name="loginInterceptor" />
			<interceptor-ref name="defaultStack" />
		</interceptor-stack>
	</interceptors>
				
	<global-results>
		<result name="db_error">errors/db.jsp</result>
		<result name="error">errors/general.jsp</result>
		<result name="permission_error">errors/noPermission.jsp</result>
	</global-results>
	
	<action name="index">
    	<result >/index.jsp</result>
	</action>

	<action name="email">
		<result>Email.jsp</result>
	</action>

	<action name="emailer" class="com.delta.expressq.actions.Emailer" method="execute">
		<result name="success">/login.jsp</result>
	</action>

	<action name="venues" class="com.delta.expressq.actions.Venues" method="execute">
		<result name="listVenues">list/venues.jsp</result>
		<result name="listItems">list/items.jsp</result>
	</action>
		
	<!-- registration -->
		<action name="registration" class="com.delta.expressq.actions.Registration" method="display">
		<result name="success">registration.jsp</result>
	</action>

	<action name="reg" class="com.delta.expressq.actions.Registration" method = "execute">
		<result name="success">home.jsp</result>
		<result name="registration">registration.jsp</result>
	</action>

	<!-- login -->
	<action name="login" class="com.delta.expressq.actions.LoginAction" method="execute">
		<result name = "success">login.jsp</result>
	</action>

	<!-- login action -->
	<action name="loginUser" class="com.delta.expressq.actions.LoginAction" method="login">
		<result name="success" type="redirect">index</result>
		<result name="login">login.jsp</result>
	</action>

	<!-- logout action -->
	<action name="logout" class="com.delta.expressq.actions.LoginAction" method="logout">
		<result name="success">login.jsp</result>
	</action>

	<!-- show summary of order -->
	<action name="summary" class="com.delta.expressq.actions.Summary" method="execute">
		<interceptor-ref name="loginStack" />
		<result name="login" type="redirect">login</result>
		<result name="success">order/summary.jsp</result>
		<result name="empty">order/empty.jsp</result>
	</action>

	<action name="confirmOrder" class="com.delta.expressq.actions.ConfirmOrder">
		<interceptor-ref name="loginStack" />
		<result name="login" type="redirect">login</result>
		<result name="success">order/confirmed.jsp</result>
		<result name="error">order/summary.jsp</result>
		<result name="order_again" type="redirect">venues</result>
	</action>

	<!-- json -->
	<action name="json" class="com.delta.expressq.actions.Json" method="execute">
		<result name="success">json/success.jsp</result>
		<result name="error">json/error.jsp</result>
	</action>

    <!-- AdminAction Actions -->
    <action name="view" class="com.delta.expressq.actions.AdminAction" method="Display">
      <result name="success">/admin/display.jsp</result>
    </action>
	
	<!-- Delete User(s) -->
    <action name="del" class="com.delta.expressq.actions.AdminAction" method="Delete">
      <result name="success">/admin/deletesuccess.jsp</result>
    </action>

	<!-- Insert New User -->
    <action name="insert" class="com.delta.expressq.actions.AdminAction" method="Insert">
      <result>registration.jsp</result>
    </action>

	<!-- Edit User Display-->
    <action name="edit" class="com.delta.expressq.actions.AdminAction" method="Edit">
      <result name ="success">admin/edituser.jsp</result>
    </action>
	
	<!-- Save Edited Changes -->
	<action name="update" class="com.delta.expressq.actions.AdminAction" method="UpdateUserDetails">
	  <result name="success" type="redirect">view</result>
	</action>
	<!--End of AdminAction Actions-->
	
	<!--User Profile Action-->
	<action name ="profile" class="com.delta.expressq.actions.UserProfileAction">
		<interceptor-ref name="loginStack" />
		<result name ="success">userprofile.jsp</result>
		<result name="login" type="redirect">login</result>
	</action>
	
	<!--Action for saving customer profile changes-->
	<action name ="UserUpdate" class="com.delta.expressq.actions.UserProfileAction" method="Update">
		<result name ="success" type="redirect">index</result>
	</action>
	
		<!--example-->
	<action name ="exampleOfMessages" class="com.delta.expressq.actions.ExampleOfMessages" method="execute">
		<result name="success">exampleOfMessages.jsp</result>
	</action>
	
	<!--///////////////// Venue Actions /////////////////-->
	<action name ="venuehome" class="com.delta.expressq.actions.VenueAction" method="execute">
		<result name ="success">/venue/main.jsp</result>
	</action>
	
	<action name ="NewSection" class="com.delta.expressq.actions.VenueAction" method="NewSection">
	      <result>/venue/newsection.jsp</result>
	</action>
	
	<action name ="InsertSection" class="com.delta.expressq.actions.VenueAction" method="InsertSection">
		<result name ="success" type="redirect">venuehome</result>
	</action>
	
	<action name="delsection" class="com.delta.expressq.actions.VenueAction" method="DeleteSection">
    	<result name="success" type="redirect">venuehome</result>
    </action>
    
    <action name="editsection" class="com.delta.expressq.actions.VenueAction" method="EditSection">
    	<result name="success">/venue/editsection.jsp</result>
    </action>
	
	<action name="updatesection" class="com.delta.expressq.actions.VenueAction" method="UpdateSection">
    	<result name="success" type="redirect">venuehome</result>
	</action>
	
	<action name="viewItems" class="com.delta.expressq.actions.VenueAction" method="DisplayItems">
		<result name="success">/venue/items.jsp</result>
	</action>
	
	<action name ="NewItem" class="com.delta.expressq.actions.VenueAction" method="NewItem">
	      <result>/venue/newitem.jsp</result>
	</action>	
	
	<action name="InsertItem" class="com.delta.expressq.actions.VenueAction" method="InsertItem">
    	<result name="success" type="redirect">venuehome</result>	
    </action>
    
    <action name="delitems" class="com.delta.expressq.actions.VenueAction" method="DeleteItem">
    	<result name="success" type="redirect">venuehome</result>
    </action>
    
    <action name="edititem" class="com.delta.expressq.actions.VenueAction" method="EditItem">
    	<result name="success">venue/editItem.jsp</result>
    </action>
    
    <action name="updateitem" class="com.delta.expressq.actions.VenueAction" method="UpdateItem">
    	<result name="success" type="redirect">venuehome</result>
	</action>
	
	<action name="viewQR" class="com.delta.expressq.actions.ViewQR" method="execute">
		<result name="success">QR.jsp</result>
		<result name="empty">qrempty.jsp</result>
	</action>
	</package>
</struts>

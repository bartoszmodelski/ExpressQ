<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
        "http://struts.apache.org/dtds/struts-2.3.dtd">
<struts>
    <constant name="struts.enable.DynamicMethodInvocation" value="false"/>
    <constant name="struts.devMode" value="true"/>
    <package name="default" namespace="/" extends="struts-default">

		<interceptors>
			<interceptor class="com.delta.expressq.interceptors.LoginInterceptor" name="loginInterceptor">
			</interceptor>
			<interceptor-stack name="loginStack">
				<interceptor-ref name="loginInterceptor" />
				<interceptor-ref name="defaultStack" />
			</interceptor-stack>
		</interceptors>
				
		<global-results>
			<result name="db_error">errors/db.jsp</result>
			<result name="error">errors/general.jsp</result>
		</global-results>
		
		<action name="index">
            <result >/index.jsp</result>
		</action>

		<action name="email">
			<result>Email.jsp</result>
		</action>

		<action name="emailer" class="com.delta.expressq.actions.Emailer" method="execute">
			<result name="success">/login.jsp</result>
		</action>

		<action name="venues" class="com.delta.expressq.actions.Venues" method="execute">
			<result name="listVenues">list/venues.jsp</result>
			<result name="listItems">list/items.jsp</result>
		</action>
		
		<action name="exampleOfSession" class="com.delta.expressq.actions.ExampleOfSession" method="execute">
			<result name="success">exampleOfSession.jsp</result>
		</action>

		<!-- registration -->
		<action name="registration">
			<result>registration.jsp</result>
		</action>

		<action name="reg" class="com.delta.expressq.actions.Registration">
			<result name="success">login.jsp</result>
			<result name="existed">exists.jsp</result>
		</action>

		<!-- login -->
		<action name="login">
			<result>login.jsp</result>
		</action>

		<!-- login action -->
		<action name="loginUser" class="com.delta.expressq.actions.LoginAction" method="login">
			<result name="success" type="redirect">homeAction</result>
			<result name="login">login.jsp</result>
		</action>


		<!-- home link action, change to website front page perhaps? -->
		<action name="homeAction" class="com.delta.expressq.actions.LoginAction" method="home">
			<interceptor-ref name="loginStack" />
			<result name="login" type="redirect">login</result>
			<result name="success">home.jsp</result>
		</action>

		<!-- logout action -->
		<action name="logout" class="com.delta.expressq.actions.LoginAction" method="logout">
			<result name="success">login.jsp</result>
		</action>

		<!-- show summary of order -->
		<action name="summary" class="com.delta.expressq.actions.Summary" method="execute">
			<interceptor-ref name="loginStack" />
			<result name="login" type="redirect">login</result>
			<result name="success">order/summary.jsp</result>
		</action>

	    <action name="confirmOrder" class="com.delta.expressq.actions.ConfirmOrder">
			<interceptor-ref name="loginStack" />
			<result name="login" type="redirect">login</result>
			<result name="success">order/confirmed.jsp</result>
			<result name="error">order/summary.jsp</result>
			<result name="order_again" type="redirect">venues</result>
		</action>

		<!-- json -->
		<action name="json" class="com.delta.expressq.actions.Json" method="execute">
			<result name="success">json/success.jsp</result>
			<result name="error">json/error.jsp</result>
		</action>

    <!-- AdminAction Actions -->
    <action name="view" class="com.delta.expressq.actions.AdminAction" method="Display">
      <result name="success">/display.jsp</result>
      <result name="denied">/errors/noPermission.jsp</result>
    </action>
	
	<!-- Delete User(s) -->
    <action name="del" class="com.delta.expressq.actions.AdminAction" method="Delete">
      <result name="success">/deletesuccess.jsp</result>
      <result name="denied">/errors/noPermission.jsp</result>
    </action>

	<!-- Insert New User -->
    <action name="insert" class="com.delta.expressq.actions.AdminAction" method="Insert">
      <result>registration.jsp</result>
    </action>

	<!-- Edit User Display-->
    <action name="edit" class="com.delta.expressq.actions.AdminAction" method="Edit">
      <result name ="success">edituser.jsp</result>
      <result name="denied">/errors/noPermission.jsp</result>
    </action>
	
	<!-- Save Edited Changes -->
	<action name="update" class="com.delta.expressq.actions.AdminAction" method="UpdateUserDetails">
	  <result name="success" type="redirect">view</result>
	  <result name="denied">/errors/noPermission.jsp</result>
	</action>
	<!--End of AdminAction Actions-->
	
	<!--User Profile Action-->
	<action name ="profile" class="com.delta.expressq.actions.UserProfileAction">
		<interceptor-ref name="loginStack" />
		<result name ="success">userprofile.jsp</result>
		<result name="login" type="redirect">login</result>
	</action>
	
	<!--Action for saving customer profile changes-->
	<action name ="UserUpdate" class="com.delta.expressq.actions.UserProfileAction" method="Update">
		<result name ="success" type="redirect">homeAction</result>
	</action>
	
		<!--exampe=le-->
	<action name ="exampleOfMessages" class="com.delta.expressq.actions.ExampleOfMessages" method="execute">
		<result name="success">exampleOfMessages.jsp</result>
	</action>
	
	<!--///////////////// Venue Actions /////////////////-->
	<action name ="venuehome" class="com.delta.expressq.actions.VenueAction" method="execute">
		<result name ="success">/venue/main.jsp</result>
	</action>
	
		<action name ="NewSection" class="com.delta.expressq.actions.VenueAction" method="NewSection">
	      <result>/venue/newsection.jsp</result>
	</action>
	
	<action name ="InsertSection" class="com.delta.expressq.actions.VenueAction" method="InsertSection">
		<result name ="success" type="redirect">venuehome</result>
	</action>
	
	<action name="delsection" class="com.delta.expressq.actions.VenueAction" method="DeleteSection">
    	<result name="success" type="redirect">venuehome</result>
    </action>
	
	</package>
</struts>
